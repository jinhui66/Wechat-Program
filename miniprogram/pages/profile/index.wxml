<view class="container">
  <!-- 头部信息 -->
  <view class="header">
    <image src="{{avatarUrl}}" class="avatar"></image>
    <text class="username">{{nickName}}</text>
    <button class="share-btn" open-type="share">
      <text class="share-text">分享</text>
    </button>

  </view>
  <!-- 功能模块 -->
  <view class="function-section">
    <view class="function-row">
      <navigator url="/pages/custom-checkin/index" class="function-item">
        <image src="/images/custom-checkin.webp" class="function-icon"></image>
        <text class="function-text">任务数据</text>
      </navigator>
      <navigator url="/pages/cards-data/index" class="function-item">
        <image src="/images/cards-data.webp" class="function-icon"></image>
        <text class="function-text">记账数据</text>
      </navigator>
      <navigator url="/pages/daily-mood/index" class="function-item">
        <image src="/images/daily-mood.webp" class="function-icon"></image>
        <text class="function-text">心情数据</text>
      </navigator>
      <navigator url="/pages/data-statistics/index" class="function-item">
        <image src="/images/data-statistics.webp" class="function-icon"></image>
        <text class="function-text">数据统计</text>
      </navigator>
    </view>
  </view>
  <view class="data-section">

    <view class="task-container">
      <view class="task-header">今日未完成任务</view>
      <block wx:for="{{incompleteTasks}}" wx:key="id">
        <view class="task-item">
          <text class="task-name">{{item.name}}</text>
          <text class="task-tag">#{{quadrantOptions[item.quadrant - 1]}}</text>
        </view>
      </block>
      <view wx:if="{{incompleteTasks.length === 0}}" class="task-empty">暂无任务</view>
    </view>
    <!-- 心情统计区块 -->
    <view class="mood-container">
      <view class="mood-header">本月心情统计</view>

      <!-- 统计图表 -->
      <view class="mood-chart">
        <view wx:for="{{moodStats}}" wx:key="mood" class="chart-bar-container">
          <view class="chart-bar" style="height: {{item.percentage * 2}}rpx; background-color: {{item.color}};"></view>
          <view class="chart-label">{{item.mood.split(' ')[1]}}</view>
          <view class="chart-count">{{item.count}}次</view>
        </view>
      </view>

      <!-- 统计详情 -->
      <view class="stats-detail">
        <view class="detail-item" wx:for="{{moodStats}}" wx:key="mood">
          <view class="detail-color" style="background-color: {{item.color}};"></view>
          <view class="detail-mood">{{item.mood}}</view>
          <view class="detail-percent">{{item.percentage}}%</view>
          <view class="detail-count">{{item.count}}次</view>
        </view>
      </view>

      <!-- 心情总结 -->
      <view class="summary">
        <view class="summary-title">本月心情总结</view>
        <view class="summary-content">{{monthSummary}}</view>
      </view>
    </view>


  </view>

</view>